#!/usr/bin/env node
"use strict";import{addDays as c,format as a,parse as i,startOfWeek as g}from"date-fns";const D={"25/06/2024":"28/06/2024","03/09/2024":"06/09/2024","01/10/2024":"30/09/2024","10/12/2024":"13/12/2024","17/12/2024":"18/12/2024","18/02/2025":"19/02/2025","25/02/2025":"26/02/2025","04/03/2025":"05/03/2025","11/03/2025":"14/03/2025"},y=process.argv?.includes("--json"),d=process.argv?.find(e=>e.startsWith("--date="))?.replace("--date=",""),t=(d?i(d,"dd/MM/yyyy",new Date):null)??new Date;y||console.log(`Data: ${a(t,"dd/MM/yyyy")}`);const M=g(t,{weekStartsOn:1}),f=c(M,1),m=c(f,7),n=l(f),r=l(m),u=n<t;if(y){const e={officeDayHasPassed:u,currentDate:t,currentDateFormated:a(t,"dd/MM/yyyy"),currOfficeDate:n,currOfficeDateWeekDay:o(n),currOfficeDateFormated:a(n,"dd/MM/yyyy"),nextOfficeDate:r,nextOfficeDateWeekDay:o(r),nextOfficeDateFormated:a(r,"dd/MM/yyyy")};console.log(JSON.stringify(e))}else console.log(`Esta semana o dia no escritorio ${u?"foi":"\xE9"} na ${o(n)}.`),console.log(`Na pr\xF3xima semana o dia no escritorio ser\xE1 na ${o(r)}.`),console.log("");function l(e){const s=D[a(e,"dd/MM/yyyy")];return s!=null?i(s,"dd/MM/yyyy",new Date):((e.getFullYear()-2024)*12+e.getMonth())%3===0?c(e,2):e}function o(e){switch(a(e,"iiii").toLowerCase()){case"monday":return"segunda-feira";case"tuesday":return"ter\xE7a-feira";case"wednesday":return"quarta-feira";case"thursday":return"quinta-feira";case"friday":return"sexta-feira";case"saturday":return"sabado";case"sunday":return"domingo";default:throw new Error}}
